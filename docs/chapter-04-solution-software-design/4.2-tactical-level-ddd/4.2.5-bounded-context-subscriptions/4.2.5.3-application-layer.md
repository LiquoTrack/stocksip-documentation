#### 4.2.5.3. Application Layer ####

La **Application Layer** orquesta la ejecución de **comandos** y **consultas** para los agregados `Account`, `Subscription`, `Plan` y `Business`.  
Se encarga de delegar la lógica de negocio a la **Domain Layer** mediante los **CommandServices** y **QueryServices**, y de coordinar eventos si aplica.

---

## Command Services

Los **Command Services** procesan acciones que **modifican el estado del dominio**, como crear, actualizar o eliminar entidades.  
Reciben **Commands**, los validan y delegan la ejecución a los **Domain Services** y **Repositories** correspondientes.

| Nombre                         | Descripción                                 | Commands manejados                                                                                      |
|--------------------------------|---------------------------------------------|---------------------------------------------------------------------------------------------------------|
| **AccountCommandService**      | Gestiona operaciones sobre cuentas.         | `CreateAccountCommand, UpdateAccountCommand, ActivateAccountCommand, DeactivateAccountCommand`          |
| **SubscriptionCommandService** | Gestiona el ciclo de vida de suscripciones. | `CreateSubscriptionCommand, UpdateSubscriptionCommand, ActivateSubscriptionCommand, UpgradePlanCommand` |
| **PlanCommandService**         | Gestiona planes de suscripción.             | `CreatePlanCommand, UpdatePlanCommand, DeactivatePlanCommand`                                           |
| **BusinessCommandService**     | Gestiona negocios asociados a cuentas.      | `CreateBusinessCommand, UpdateBusinessCommand`                                                          |

---

## Query Services

Los **Query Services** se encargan de **consultar datos del dominio** sin modificar su estado.  
Reciben **Queries**, consultan los **Repositories** y devuelven resultados al **Controller** o consumidor de la API.

| Nombre                       | Descripción                            | Queries manejadas                                                                                |
|------------------------------|----------------------------------------|--------------------------------------------------------------------------------------------------|
| **AccountQueryService**      | Consultas sobre cuentas.               | `GetAccountByIdQuery, GetAccountsByStatusQuery, GetAccountsByBusinessQuery, GetAllAccountsQuery` |
| **SubscriptionQueryService** | Consultas sobre suscripciones.         | `GetSubscriptionByIdQuery, GetSubscriptionsByAccountQuery, GetActiveSubscriptionsQuery`          |
| **PlanQueryService**         | Consultas sobre planes de suscripción. | `GetPlanByIdQuery, GetAllPlansQuery, GetPlansByTypeQuery`                                        |
| **BusinessQueryService**     | Consultas sobre negocios.              | `GetBusinessByIdQuery, GetAllBusinessesQuery`                                                    |
