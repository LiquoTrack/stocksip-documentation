#### 4.2.5.2. Interface Layer ####

La **Interface Layer** expone los servicios del bounded context hacia el exterior mediante **APIs REST**, permitiendo que clientes externos (web o móvil) interactúen con las cuentas, suscripciones, planes y negocios.  
Se definen los **Controllers**, **Resources** y **Assemblers/Transformers**, encargados de mapear entre las entidades de dominio y los formatos de entrada/salida utilizados por los consumidores.

---

## Controllers

| Nombre                      | Descripción                                              | Endpoints (ejemplos)                                                                                                                                                  |
|-----------------------------|----------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **AccountsController**      | Gestiona operaciones sobre cuentas de usuario o negocio. | `POST /accounts (CreateAccount)`<br>`PUT /accounts/{id} (UpdateAccount)`<br>`GET /accounts/{id}`<br>`GET /accounts/status/{status}`                                   |
| **SubscriptionsController** | Gestiona el ciclo de vida de suscripciones.              | `POST /subscriptions (CreateSubscription)`<br>`PUT /subscriptions/{id} (UpdateSubscription)`<br>`GET /subscriptions/{id}`<br>`GET /subscriptions/account/{accountId}` |
| **PlansController**         | Gestiona los planes de suscripción.                      | `POST /plans (CreatePlan)`<br>`PUT /plans/{id} (UpdatePlan)`<br>`GET /plans/{id}`<br>`GET /plans`                                                                     |
| **BusinessesController**    | Gestiona información de negocios asociados a cuentas.    | `POST /businesses (CreateBusiness)`<br>`PUT /businesses/{id} (UpdateBusiness)`<br>`GET /businesses/{id}`<br>`GET /businesses`                                         |

---

## Resources

Los **Resources** definen la estructura de datos que los clientes externos envían o reciben, evitando exponer directamente las entidades del dominio.

- **CreateAccountResource**: `{ BusinessId: string, OwnerUserId: string, Role: string }`
- **AccountResource**: `{ Id: string, BusinessName: string, Email: string, Status: string, Role: string }`
- **CreateSubscriptionResource**: `{ AccountId: string, PlanId: string }`
- **SubscriptionResource**: `{ Id: string, AccountId: string, PlanId: string, Status: string, ExpirationDate: DateTime }`
- **CreatePlanResource**: `{ PlanType: string, Description: string, PaymentFrequency: string, Price: decimal, MaxWarehouses: int, MaxProducts: int }`
- **PlanResource**: `{ Id: string, PlanType: string, Description: string, PaymentFrequency: string, Price: decimal, MaxWarehouses: int, MaxProducts: int }`
- **CreateBusinessResource**: `{ BusinessName: string, Email: string, Ruc: string }`
- **BusinessResource**: `{ Id: string, BusinessName: string, Email: string, Ruc: string }`

---

## Assemblers / Transformers

Se implementan componentes que transforman los **Resources** ↔ **Entities/Aggregates**, asegurando que la capa de interfaces no contenga lógica de negocio.

- `AccountFromResourceAssembler` → Convierte un `CreateAccountResource` en `CreateAccountCommand`.
- `AccountResourceFromEntityAssembler` → Convierte un `Account` (dominio) en `AccountResource`.
- `SubscriptionFromResourceAssembler` → Convierte un `CreateSubscriptionResource` en `CreateSubscriptionCommand`.
- `SubscriptionResourceFromEntityAssembler` → Convierte un `Subscription` en `SubscriptionResource`.
- `PlanFromResourceAssembler` → Convierte un `CreatePlanResource` en `CreatePlanCommand`.
- `PlanResourceFromEntityAssembler` → Convierte un `Plan` en `PlanResource`.
- `BusinessFromResourceAssembler` → Convierte un `CreateBusinessResource` en `CreateBusinessCommand`.
- `BusinessResourceFromEntityAssembler` → Convierte un `Business` en `BusinessResource`.
