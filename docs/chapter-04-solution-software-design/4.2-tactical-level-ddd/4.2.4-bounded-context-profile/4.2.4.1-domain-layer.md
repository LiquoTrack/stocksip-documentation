### 4.2.4. Bounded Context: Profile Management ###

#### 4.2.4.1. Domain Layer ####

La capa Profiles constituye el núcleo del bounded context dedicado a la gestión de perfiles de usuario, centralizando la lógica de negocio que define sus atributos, configuraciones y asociaciones dentro del sistema.

En esta capa se definen las reglas y comportamientos propios del dominio de perfiles: creación y edición de datos de usuario, validación de información, personalización de configuraciones y control de asociaciones con otras entidades del sistema.

## Aggregates

| Nombre              | Descripción                                                                                                                                            | Atributos                                                                                                                                                                                                                                           | 
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Profile**         | Aggregate Root que modela el perfil de un usuario. Agrupa datos personales, contactos y metadatos que deben mantenerse consistentes como unidad.       | `Id: string, Name: PersonName, PersonContactNumber: PersonContactNumber, FirstName: string, LastName: string, ContactNumber: string, Sex: string, BirthDate: DateTime, CreatedAt: DateTime, UpdatedAt: DateTime, AvatarUrl: string, UserId: UserId` | 

---

## Value Objects

| Nombre                  | Descripción                                                                | Atributos                                                                    |
| ----------------------- | -------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| **PersonName**          | Valor que agrupa nombre y apellido, y encapsula reglas de formato.         | `Atributos: { FirstName: string, LastName: string }`  |
| **PersonContactNumber** | Valor inmutable que valida y representa el número de contacto del usuario. | `Atributos: { PhoneNumber: string }`    |

---

## Services

| Nombre                      | Descripción                                                                                  | Métodos (commands / queries)                                                                                                                       |
| --------------------------- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **IProfileCommandService**  | Define las operaciones de escritura y coordinación sobre el agregado `Profile`.              | `CreateProfile(CreateProfileCommand), UpdateProfile(UpdateProfileCommand), DeleteProfile(DeleteProfileCommand), ChangeAvatar(ChangeAvatarCommand)` |
| **IProfileQueryService**    | Exposición de consultas sobre perfiles (read-only), pensada para obtener representaciones.   | `GetById(Guid id), GetByUserId(UserId userId), GetByName(string name), GetAll()`                                                                   |

---

## Repositories

| Nombre                      | Descripción                                                | Métodos                                                                                                                                                                                                        |
| --------------------------- | ---------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **IProfileRepository**      | Abstracción de persistencia para el agregado `Profile`.    | `Task<Profile?> GetByIdAsync(Guid id), Task<Profile?> GetByUserIdAsync(UserId userId), Task<IEnumerable<Profile>> GetAllAsync(), Task AddAsync(Profile), Task UpdateAsync(Profile), Task DeleteAsync(Guid id)` |
