#### 4.2.6.2. Interface Layer ####


### 4.2.6.2. Interface Layer ###  

La **Interface Layer** expone los servicios del bounded context hacia el exterior mediante **APIs REST** o mecanismos de mensajería, sirviendo como punto de entrada para clientes externos o internos.  
Aquí se definen los **Resources**, **Controllers** y **Transformers**, que permiten mapear entre las entidades del dominio y los formatos de entrada/salida utilizados por los consumidores.

## Controllers

| Nombre                      | Descripción                                                                                                | Endpoints                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------------|------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **AlertsController**        | Expone endpoints REST para gestionar las alertas del sistema.                                              | `POST /alerts` → Crear alerta.<br>`PUT /alerts/{id}` → Actualizar alerta.<br>`DELETE /alerts/{id}` → Eliminar alerta.<br>`GET /alerts/{id}` → Obtener alerta.<br>`GET /alerts/account/{accountId}` → Listar alertas por cuenta.<br>`GET /alerts/severity/{severity}` → Filtrar alertas por severidad.                                                                     |
| **NotificationsController** | Expone endpoints REST para gestionar el envío y consulta de notificaciones a usuarios o sistemas externos. | `POST /notifications` → Enviar notificación.<br>`PUT /notifications/{id}` → Actualizar notificación.<br>`DELETE /notifications/{id}` → Cancelar notificación.<br>`GET /notifications/{id}` → Obtener notificación.<br>`GET /notifications/account/{accountId}` → Listar notificaciones por cuenta.<br>`GET /notifications/type/{type}` → Filtrar notificaciones por tipo. |

---

---

## Resources

Los controladores utilizarán **Resources** para **mapear las solicitudes y respuestas** de la API, evitando exponer directamente las entidades de dominio. Cada Resource representa la estructura de datos que los clientes externos (frontend, apps móviles u otros servicios) consumirán o enviarán.

- **CreateAlertResource**: `{ Title: string, Message: string, Severity: string, AccountId: string, InventoryId: string }`
- **AlertResource**: `{ Id: string, Title: string, Message: string, Severity: string, GeneratedAt: DateTime, AccountId: string, InventoryId: string }`
- **SendNotificationResource**: `{ Title: string, Message: string, Severity: string, AccountId: string, PurchaseOrderId: string }`
- **NotificationResource**: `{ Id: string, Title: string, Message: string, Severity: string, GeneratedAt: DateTime, AccountId: string, PurchaseOrderId: string }`

---

## Assemblers

Se implementan componentes que transforman los **Resources** ↔ **Commands/Entities/Aggregates**, asegurando que la capa de interfaces no tenga lógica de negocio.

- `AlertFromResourceAssembler` convierte un `CreateAlertResource` en un `CreateAlertCommand`.
- `AlertResourceFromEntityAssembler` convierte un `Alert` (dominio) en un `AlertResource` (DTO expuesto).
- `NotificationFromResourceAssembler` convierte un `SendNotificationResource` en un `SendNotificationCommand`.
- `NotificationResourceFromEntityAssembler` convierte un `Notification` (dominio) en un `NotificationResource` (DTO expuesto).