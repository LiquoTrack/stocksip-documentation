#### 4.2.6.4. Infrastructure Layer ####

La **Infrastructure Layer** provee las implementaciones técnicas necesarias para que la **Application Layer** y la **Domain Layer** funcionen.  
Se encarga de la **persistencia de datos, la integración con servicios externos, la mensajería/eventos, logging, seguridad y delivery de notificaciones**.

En este contexto de **Alertas**, la infraestructura conecta el dominio con servicios externos.

---

## Repositories

Los **Repositories** implementan la persistencia de los agregados definidos en el dominio.  
Actúan como puente entre las **Entities/Aggregates** de la **Domain Layer** y las fuentes de datos (MongoDB, SQL, etc.).

| Nombre                     | Descripción                                       | Implementación                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|----------------------------|---------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **AlertRepository**        | Guarda y recupera alertas desde la base de datos. | - `AddAsync(Alert alert)` → Insertar nueva alerta.<br>- `UpdateAsync(Alert alert)` → Actualizar alerta existente.<br>- `DeleteAsync(Guid id)` → Eliminar alerta.<br>- `GetByIdAsync(Guid id)` → Obtener alerta por Id.<br>- `GetByAccountAsync(AccountId accountId)` → Obtener alertas por cuenta.<br>- `GetBySeverityAsync(ESeverityTypes severity)` → Filtrar alertas por severidad.                                                          |
| **NotificationRepository** | Gestiona el historial de notificaciones enviadas. | - `AddAsync(Notification notification)` → Insertar nueva notificación.<br>- `UpdateAsync(Notification notification)` → Actualizar notificación existente.<br>- `DeleteAsync(Guid id)` → Eliminar notificación.<br>- `GetByIdAsync(Guid id)` → Obtener notificación por Id.<br>- `GetByAccountAsync(AccountId accountId)` → Obtener notificaciones por cuenta.<br>- `GetByTypeAsync(ENotificationTypes type)` → Filtrar notificaciones por tipo. |

