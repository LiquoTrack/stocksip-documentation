### 4.2.6. Bounded Context: Alerts And Notifications ###

#### 4.2.6.1. Domain Layer ####

La capa Alerts And Notifications constituye el núcleo del bounded context encargado de la creación, procesamiento y distribución de alertas internas y notificaciones externas, centralizando la lógica asociada a la comunicación del sistema.

En esta capa se definen las reglas y comportamientos propios del dominio de notificaciones: generación de alertas críticas derivadas de eventos internos (Alert), construcción de mensajes hacia usuarios (Notification), y seguimiento de la entrega para garantizar la comunicación efectiva.

## Aggregates

| Nombre           | Descripción                                                                                                 | Atributos                                                                                                                                             |
|------------------|-------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Alert**        | Representa una alerta generada por eventos internos del sistema que requieren atención.                     | `Id: string, Title: string, Message: string, Severity: ESeverityTypes, GeneratedAt: DateTime, AccountId: AccountId, InventoryId: InventoryId`         |
| **Notification** | Representa una notificación enviada a usuarios o sistemas externos para informar sobre eventos importantes. | `Id: string, Title: string, Message: string, Severity: ESeverityTypes, GeneratedAt: DateTime, AccountId: AccountId, PurchaseOrderId: PurchaseOrderId` |

---

## Value Objects

| Nombre                 | Descripción                                                         | Atributos / Métodos                                                    |
|------------------------|---------------------------------------------------------------------|------------------------------------------------------------------------|
| **EAlertType**         | Tipos de alertas que pueden generarse en el sistema.                | `Valores: ProductLowStock, ProductOutStock, ProductExpired`            |
| **ESeverityTypes**     | Define la severidad de una alerta o notificación.                   | `Valores: Info, Warning, Critical`                                     |
| **ENotificationTypes** | Tipos de notificaciones que se pueden enviar a usuarios o sistemas. | `Valores: OrderSent, OrderConfirmed, OrderCompleted, ProductDelivered` |
| **PurchaseOrderId**    | Identificador de una orden de compra asociado a la notificación.    | `Atributos: { Id: string }`                                            |

---

## Services

| Nombre                          | Descripción                                                                   | Métodos (Commands / Queries)                                                                                                              |
|---------------------------------|-------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| **IAlertCommandService**        | Gestiona la creación y actualización de alertas internas.                     | `CreateAlert(CreateAlertCommand), UpdateAlert(UpdateAlertCommand), DeleteAlert(DeleteAlertCommand)`                                       |
| **INotificationCommandService** | Gestiona el envío y control de notificaciones a usuarios y sistemas externos. | `SendNotification(SendNotificationCommand), UpdateNotification(UpdateNotificationCommand), CancelNotification(CancelNotificationCommand)` |
| **IAlertQueryService**          | Permite consultar alertas generadas en el sistema según distintos criterios.  | `GetAlertById(Guid id), GetAlertsByAccount(AccountId accountId), GetAlertsBySeverity(ESeverityTypes severity)`                            |
| **INotificationQueryService**   | Permite consultar notificaciones enviadas o pendientes de envío.              | `GetNotificationById(Guid id), GetNotificationsByAccount(AccountId accountId), GetNotificationsByType(ENotificationTypes type)`           |

---

## Repositories

| Nombre                      | Descripción                                                                            | Métodos                                                                                                                                                                                                     |
|-----------------------------|----------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **IAlertRepository**        | Define la persistencia de las alertas en la base de datos o sistema de almacenamiento. | `AddAsync(Alert alert), UpdateAsync(Alert alert), DeleteAsync(Guid id), GetByIdAsync(Guid id), GetByAccountAsync(AccountId accountId), GetBySeverityAsync(ESeverityTypes severity)`                         |
| **INotificationRepository** | Define la persistencia de las notificaciones enviadas o programadas.                   | `AddAsync(Notification notification), UpdateAsync(Notification notification), DeleteAsync(Guid id), GetByIdAsync(Guid id), GetByAccountAsync(AccountId accountId), GetByTypeAsync(ENotificationTypes type)` |

