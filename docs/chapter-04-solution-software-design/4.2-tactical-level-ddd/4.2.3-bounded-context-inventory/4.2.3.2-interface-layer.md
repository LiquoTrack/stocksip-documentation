### 4.2.3.2. Interface Layer

La **Interface Layer** expone la funcionalidad del dominio de **Inventory Management** hacia aplicaciones externas, garantizando la comunicación con clientes (web, móviles o terceros).  
Incluye **Controllers, DTOs, Request/Response Models y Assemblers**, los cuales transforman las entidades y objetos de valor del dominio en representaciones adecuadas para la capa de aplicación o la API pública.

---

## Controllers

| Nombre                         | Descripción                                                                 | Endpoints principales                                                                                                           |
|--------------------------------|-----------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| **WarehousesController**       | Expone operaciones para gestión de almacenes.                               | `POST /warehouses, PUT /warehouses/{id}, DELETE /warehouses/{id}, GET /warehouses, GET /warehouses/{id}`                       |
| **ProductsController**         | Expone operaciones para creación, consulta y actualización de productos.    | `POST /products, PUT /products/{id}, DELETE /products/{id}, GET /products, GET /products/{id}`                                 |
| **InventoriesController**      | Expone operaciones sobre inventarios y movimientos de stock.                | `POST /inventories, PUT /inventories/{id}, GET /inventories, GET /inventories/{id}, POST /inventories/{id}/transfer`          |
| **CareGuidesController**       | Expone operaciones para gestión de guías de cuidado.                        | `POST /careguides, PUT /careguides/{id}, DELETE /careguides/{id}, GET /careguides, GET /careguides/{id}`                       |
| **CatalogsController**         | Expone operaciones de catálogos y sus ítems.                                | `POST /catalogs, PUT /catalogs/{id}, DELETE /catalogs/{id}, GET /catalogs, GET /catalogs/{id}, POST /catalogs/{id}/publish`   |
| **ProductExitsController**     | Expone registros de salidas de productos.                                   | `POST /productexits, GET /productexits/{id}, GET /productexits?inventoryId={id}, GET /productexits?from={date}&to={date}`     |
| **ProductTransfersController** | Expone registros de transferencias de productos entre almacenes.            | `POST /producttransfers, GET /producttransfers/{id}, GET /producttransfers?warehouseId={id}, GET /producttransfers?from={date}&to={date}` |

---

## Resources

Los controladores utilizarán **Resources** para **mapear las solicitudes y respuestas** de la API, evitando exponer directamente las entidades de dominio.  
Cada Resource representa la estructura de datos que los clientes externos (frontend, apps móviles u otros servicios) consumirán o enviarán.

- **CreateWarehouseResource**: `{ Name: string, Address: string, Temperature: double, TotalCapacity: int, ImageUrl: string }`
- **WarehouseResource**: `{ Id: string, Name: string, Address: string, Temperature: double, TotalCapacity: int, ImageUrl: string }`

- **CreateProductResource**: `{ ProductName: string, UnitPrice: decimal, BrandId: string, Type: string, MinimumStock: int, IsInWarehouse: bool, ImageUrl: string }`
- **ProductResource**: `{ Id: string, ProductName: string, UnitPrice: decimal, Brand: BrandResource, Type: string, MinimumStock: int, IsInWarehouse: bool, ImageUrl: string }`

- **CreateInventoryResource**: `{ ProductId: string, WarehouseId: string, CurrentStock: int, CurrentState: string }`
- **InventoryResource**: `{ Id: string, ProductId: string, WarehouseId: string, CurrentStock: int, CurrentState: string }`

- **CreateCareGuideResource**: `{ ProductId: string, Title: string, Summary: string, RecommendedMaxTemperature: double, RecommendedMinTemperature: double, RecommendedPlaceStorage: string }`
- **CareGuideResource**: `{ Id: string, ProductId: string, Title: string, Summary: string, RecommendedMaxTemperature: double, RecommendedMinTemperature: double, RecommendedPlaceStorage: string }`

- **CreateCatalogResource**: `{ Name: string, Description: string, OwnerAccountId: string }`
- **CatalogResource**: `{ Id: string, Name: string, Description: string, OwnerAccountId: string, IsPublished: bool, Items: [CatalogItemResource] }`

- **CreateCatalogItemResource**: `{ ProductId: string, InventoryId: string, UnitPrice: decimal, StockAvailable: int }`
- **CatalogItemResource**: `{ ProductId: string, InventoryId: string, UnitPrice: decimal, StockAvailable: int, AddedDate: datetime }`

- **BrandResource**: `{ Id: string, Name: string }`

- **CreateProductExitResource**: `{ InventoryId: string, ExitReason: string, OutputQuantity: int, ExitDate: datetime }`
- **ProductExitResource**: `{ Id: string, InventoryId: string, ExitReason: string, OutputQuantity: int, ExitDate: datetime }`

- **CreateProductTransferResource**: `{ OriginalInventoryId: string, NewWarehouseId: string, ProductToTransferId: string, TransferDate: datetime }`
- **ProductTransferResource**: `{ Id: string, OriginalInventoryId: string, NewWarehouseId: string, ProductToTransferId: string, TransferDate: datetime }`

---

## Assemblers

Se implementan componentes que transforman los **Resources ↔ DTOs/Entities**, asegurando que la capa de interfaces no tenga lógica de negocio.

- `WarehouseFromResourceAssembler` convierte un `CreateWarehouseResource` en un `Warehouse`.
- `WarehouseResourceFromEntityAssembler` convierte un `Warehouse` en un `WarehouseResource`.

- `ProductFromResourceAssembler` convierte un `CreateProductResource` en un `Product`.
- `ProductResourceFromEntityAssembler` convierte un `Product` en un `ProductResource`.

- `InventoryFromResourceAssembler` convierte un `CreateInventoryResource` en un `Inventory`.
- `InventoryResourceFromEntityAssembler` convierte un `InventoryDto` en un `InventoryResource`.

- `CareGuideFromResourceAssembler` convierte un `CreateCareGuideResource` en un `CareGuide`.
- `CareGuideResourceFromEntityAssembler` convierte un `CareGuideDto` en un `CareGuideResource`.

- `CatalogFromResourceAssembler` convierte un `CreateCatalogResource` en un `Catalog`.
- `CatalogResourceFromEntityAssembler` convierte un `Catalog` en un `CatalogResource`.

- `CatalogItemFromResourceAssembler` convierte un `CreateCatalogItemResource` en un `CatalogItem`.
- `CatalogItemResourceFromEntityAssembler` convierte un `CatalogItemEntity` en un `CatalogItemResource`.

- `ProductExitFromResourceAssembler` convierte un `CreateProductExitResource` en un `ProductExit`.
- `ProductExitResourceFromEntityAssembler` convierte un `ProductExit` en un `ProductExitResource`.

- `ProductTransferFromResourceAssembler` convierte un `CreateProductTransferResource` en un `ProductTransfer`.
- `ProductTransferResourceFromEntityAssembler` convierte un `ProductTransfer` en un `ProductTransferResource`.
