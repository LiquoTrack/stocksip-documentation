## _3.3. Spike Stories_ ##

### 3.3.1 **Spike**: Investigar la integración de Google Identity Services (GIS) para registro e inicio de sesión de usuarios en la plataforma de Stocksip.

**Contexto**:  
La Plataforma **Stocksip** consta de una aplicación web construida con **Vue.js 3** y **JavaScript**, una aplicación móvil desarrollada de forma nativa para **Android** utilizando **Kotlin** y **Jetpack Compose** junto a los lineamientos de **Material Design** para la construcción de la interfaz de usuario, además de una aplicación móvil multiplataforma desarrollada con **Flutter** y **Dart**, y un backend implementado con **ASP.NET Core 9** utilizando **C# 13** para servicios RESTful y persistencia de datos en **MongoDB**.
La aplicación web utiliza **PrimeVue** para componentes de interfaz y la biblioteca **Axios** para consumir servicios del backend. La aplicación Android nativa emplea Kotlin y Jetpack Compose para definir pantallas responsivas y adaptadas a Material Design, mientras que la aplicación Flutter proporciona una alternativa multiplataforma con Dart. Ambas aplicaciones móviles interactúan con el backend a través de llamadas HTTP.
El backend ASP.NET Core expone controladores REST para la lógica de negocio, junto con **MongoDB.Driver** para la persistencia de datos, y administra dependencias mediante **NuGet**. El equipo busca integrar **Google Identity Services (GIS)**, aprovechando **OAuth 2.0** y **OpenID Connect**, con el fin de habilitar un registro e inicio de sesión seguro mediante cuentas de Google en las plataformas web y móviles.
Se busca simplificar el flujo de registro, reducir el tiempo de inicio de sesión, mejorar la seguridad al delegar la autenticación a Google, y garantizar conformidad con estándares modernos de identidad digital.


**Spike Story**

**Como** equipo de desarrollo móvil del equipo de Stocksip, **quiero** investigar la integración de la API de Gmail para el registro de usuarios y el envío de códigos aleatorios en nuestra aplicación móvil Kotlin y backend ASP.NET Core, **para** que podamos mejorar la seguridad y la experiencia del usuario durante el proceso de registro y verificación.

**Criterios de Aceptación**:

1. **Registrar y enviar código**
    - **Given** un email válido no registrado
      **When** hago POST /api/v1/emails/register con { "email": "user@example.com" }
      **Then** el API responde 201 y en background se envía un correo con un código de 6 dígitos al email proporcionado
      **And** la base de datos registra el email y el código (hashed), con fecha de expiración.

2. **Listado de correos**
    - **Given** que soy cliente autorizado
      **When** hago GET /api/v1/emails
      **Then** recibo un listado paginado de correos registrados con metadatos (creado, verificado, desactivado).

3. **Seguridad del código**
    - **Given** un código generado
      **When** se guarda en base de datos
      **Then** se almacena hashed y el código en texto no se guarda permanentemente
      **And** el código expira y solo es válido una vez.

**Definition of Done (DoD)**
- La investigación está documentada en un informe técnico.
- Se han identificado las mejores prácticas para la integración de la API de Gmail.
- Los hallazgos se utilizan para crear o refinar historias de implementación en el backlog.

### 3.3.2 **Spike**: Investigar la Integración de Mercado Pago para procesamiento de pagos en la plataforma Stocksip.