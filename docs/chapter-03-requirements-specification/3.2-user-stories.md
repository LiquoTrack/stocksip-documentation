## _3.2. User Stories_ ##

**Spike**: Investigar la Integración API Gmail para Registro de correo y envío de código aleatorio

**Contexto**: La Plataforma Stocksip consta de una aplicación web con base en Vue y javascript, un código base Kotlin Multiplatform Mobile (KMM) dirigido a
Android e iOS con lógica compartida en Kotlin y UI específica por plataforma (Kotlin/Java para Android, interoperabilidad con Swift para iOS), y un backend ASP.NET Core Web API con base de datos MongoDB para servicios web.
La aplicación web Vue 3 utiliza JavaScript y la librería Axios para consumir los servicios RESTful del backend ASP.NET Core Web API. La aplicación móvil KMM utiliza Kotlin para la lógica compartida y las interfaces de usuario específicas de cada plataforma, interactuando con el backend a través de llamadas HTTP.,
PrimeVue para componentes UI en la web, usando npm para gestionar las dependencias. La aplicación móvil KMM usa Kotlin para la logica compartida y las interfaces de usuario específicas de cada plataforma, interactuando con el backend a través de llamadas HTTP.
El backend ASP.NET Core Web API maneja la lógica de negocio y la persistencia de datos en MongoDB, proporcionando una API RESTful que es consumida tanto por la aplicación web como por la móvil. El equipo busca integrar API de Gmail para gestionar el registro de usuarios y el envío de códigos aleatorios para verificación en plataformas web y móvil.
Las motivaciones para esta integración incluyen mejorar la seguridad del proceso de registro, facilitar la recuperación de cuentas y proporcionar una experiencia de usuario más fluida y confiable.

**Spike Story**

**Como** equipo de desarrollo móvil del equipo de Stocksip, **quiero** investigar la integración de la API de Gmail para el registro de usuarios y el envío de códigos aleatorios en nuestra aplicación móvil Kotlin y backend ASP.NET Core, **para** que podamos mejorar la seguridad y la experiencia del usuario durante el proceso de registro y verificación.

**Criterios de Aceptación**:

1. **Registrar y enviar código**
    - **Given** un email válido no registrado
      **When** hago POST /api/v1/emails/register con { "email": "user@example.com" }
      **Then** el API responde 201 y en background se envía un correo con un código de 6 dígitos al email proporcionado
      **And** la base de datos registra el email y el código (hashed), con fecha de expiración.

2. **Listado de correos**
    - **Given** que soy cliente autorizado
      **When** hago GET /api/v1/emails
      **Then** recibo un listado paginado de correos registrados con metadatos (creado, verificado, desactivado).

3. **Seguridad del código**
    - **Given** un código generado
      **When** se guarda en base de datos
      **Then** se almacena hashed y el código en texto no se guarda permanentemente
      **And** el código expira y solo es válido una vez.

**Definition of Done (DoD)**
- La investigación está documentada en un informe técnico.
- Se han identificado las mejores prácticas para la integración de la API de Gmail.
- Los hallazgos se utilizan para crear o refinar historias de implementación en el backlog.   